---
title: "Async Await with SwiftUI"
date: 2024-07-13 16:22:24
categories: ['async/await', 'async/await+swift+example', 'parellel+network+call+swiftui', 'SwiftUI']
layout: post
---

<!-- wp:paragraph -->
In this article It has explanation how to use async/await with two network calls<br>We can use an array of <code>Task</code> instances to manage multiple concurrent tasks in Swift. This approach is useful for running multiple network requests in parallel and handling their results collectively. Here's how you can incorporate an array of <code>Task</code> instances into your ViewModel for fetching data concurrently.


<!-- /wp:paragraph -->

<!-- wp:heading {"level":5} -->
<h5 class="wp-block-heading">Step-by-Step Implementation with Task Array</h5>
<!-- /wp:heading -->

<!-- wp:list {"ordered":true} -->
<ol><!-- wp:list-item -->
<li><strong>Create a Model for Your Data</strong></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><strong>Create a Network Service</strong></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><strong>Create a ViewModel with Task Array</strong></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><strong>Create a SwiftUI View</strong></li>
<!-- /wp:list-item --></ol>
<!-- /wp:list -->

<!-- wp:heading {"level":6} -->
<h6 class="wp-block-heading">1. Create a Model for Your Data</h6>
<!-- /wp:heading -->

<!-- wp:paragraph -->
Create a new Swift file named <code>Hotel.swift</code> and define your model:


<!-- /wp:paragraph -->

<!-- wp:heading {"level":6} -->
<h6 class="wp-block-heading">2. Create a Network Service</h6>
<!-- /wp:heading -->

<!-- wp:paragraph -->
Create a new Swift file named <code>NetworkService.swift</code> for your network calls:


<!-- /wp:paragraph -->

<!-- wp:heading {"level":6} -->
<h6 class="wp-block-heading">3. Create a ViewModel with Task Array</h6>
<!-- /wp:heading -->

<!-- wp:paragraph -->
Create a new Swift file named <code>HotelViewModel.swift</code> for your view model:


<!-- /wp:paragraph -->

<!-- wp:heading {"level":6} -->
<h6 class="wp-block-heading">4. Create a SwiftUI View</h6>
<!-- /wp:heading -->

<!-- wp:paragraph -->
Finally, create your main SwiftUI view in <code>ContentView.swift</code>:


<!-- /wp:paragraph -->

<!-- wp:heading {"level":5} -->
<h5 class="wp-block-heading">Explanation</h5>
<!-- /wp:heading -->

<!-- wp:list -->
<ul><!-- wp:list-item -->
<li><strong>Model</strong>: <code>Hotel</code> and <code>AdditionalInfo</code> are defined to match the structure of the JSON data.</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><strong>NetworkService</strong>: Contains methods to fetch data from the provided URLs.</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><strong>ViewModel</strong>: <code>HotelViewModel</code> manages the state, including loading and error states, and performs data fetching using an array of <code>Task</code> instances. It includes functionality to cancel ongoing tasks.</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><strong>ContentView</strong>: Displays a loader, handles errors, and shows the list of hotels and additional info when available. The <code>onDisappear</code> modifier is used to cancel the fetch tasks if the view disappears.</li>
<!-- /wp:list-item --></ul>
<!-- /wp:list -->

<!-- wp:paragraph -->
This implementation ensures that multiple tasks can be managed and canceled effectively, making the app responsive to user interactions and preventing unnecessary network requests.


<!-- /wp:paragraph -->

<!-- wp:kevinbatdorf/code-block-pro {"code":"import SwiftUI\nimport Foundation\n\n// MARK: - Model Definitions\n\nstruct Hotel: Codable, Identifiable {\n    let id: Int\n    let name: String\n    let cuisine: String\n}\n\nstruct AdditionalInfo: Codable {\n    let title: String\n}\n\n// MARK: - Network Service\n\nclass NetworkService {\n    static let shared = NetworkService()\n\n    private init() {}\n\n    // Asynchronously fetch hotels from a JSON endpoint\n    func fetchHotels() async throws -\u003e  {\n        let url = URL(string: \u0022https://raw.githubusercontent.com/janeshsutharios/REST_GET_API/main/HotelsList.json\u0022)!\n        let (data, _) = try await URLSession.shared.data(from: url)\n        do  {\n            let results = try JSONDecoder().decode(.self, from: data)\n            return results\n        } catch {\n            print(\u0022Error in fetching hotels:\u0022, error)\n            return \n        }\n    }\n\n    // Asynchronously fetch additional information from another JSON endpoint\n    func fetchAdditionalInfo() async throws -\u003e  {\n        let url = URL(string: \u0022https://raw.githubusercontent.com/janeshsutharios/REST_GET_API/main/get.json\u0022)!\n        let (data, _) = try await URLSession.shared.data(from: url)\n        do {\n            return try JSONDecoder().decode(.self, from: data)\n        } catch {\n            print(\u0022Error in fetching additional info:\u0022, error)\n            return \n        }\n    }\n}\n\n// MARK: - View Model\n\n@MainActor\nclass HotelViewModel: ObservableObject {\n    @Published var hotels:  = \n    @Published var additionalInfo:  = \n    @Published var isLoading: Bool = false\n    @Published var errorMessage: String?\n\n    private var tasks:  = \n\n    // Fetch data from NetworkService\n    func fetchData() {\n        guard #available(iOS 15.0, *) else { return }\n\n        isLoading = true\n        cancelTasks() // Cancel any existing tasks\n\n        // Task to fetch hotels\n        let fetchHotelsTask = Task {\n            do {\n                let hotels = try await NetworkService.shared.fetchHotels()\n                self.hotels = hotels\n            } catch {\n                if !Task.isCancelled {\n                    self.errorMessage = \u0022Failed to fetch hotels: \\(error.localizedDescription)\u0022\n                }\n            }\n        }\n\n        // Task to fetch additional info\n        let fetchAdditionalInfoTask = Task {\n            do {\n                let additionalInfo = try await NetworkService.shared.fetchAdditionalInfo()\n                self.additionalInfo = additionalInfo\n            } catch {\n                if !Task.isCancelled {\n                    self.errorMessage = \u0022Failed to fetch additional info: \\(error.localizedDescription)\u0022\n                }\n            }\n        }\n\n        // Store tasks for cancellation and completion handling\n        tasks = \n\n        // Wait for both tasks to complete before setting isLoading to false\n        Task {\n            await fetchHotelsTask.value\n            await fetchAdditionalInfoTask.value\n            self.isLoading = false\n        }\n    }\n\n    // Cancel all ongoing tasks\n    func cancelTasks() {\n        tasks.forEach { $0.cancel() }\n        tasks.removeAll()\n    }\n}\n\n// MARK: - Content View\n\nstruct ContentView: View {\n    @StateObject private var viewModel = HotelViewModel()\n\n    var body: some View {\n        NavigationView {\n            VStack {\n                // Show loading indicator while fetching data\n                if viewModel.isLoading {\n                    ProgressView(\u0022Loading...\u0022)\n                        .progressViewStyle(CircularProgressViewStyle())\n                        .onDisappear {\n                            viewModel.cancelTasks() // Cancel the tasks if the view disappears\n                        }\n                }\n                // Show error message if data fetching fails\n                else if let errorMessage = viewModel.errorMessage {\n                    Text(errorMessage)\n                        .foregroundColor(.red)\n                }\n                // Display fetched additional info and hotels list\n                else {\n                    Text(viewModel.additionalInfo.first?.title ?? \u0022No additional info\u0022)\n                        .font(.headline)\n                        .padding()\n                    \n                    List(viewModel.hotels) { hotel in\n                        VStack(alignment: .leading) {\n                            Text(hotel.name)\n                                .font(.headline)\n                            Text(hotel.cuisine)\n                                .font(.subheadline)\n                        }\n                    }\n                    .listStyle(InsetGroupedListStyle())\n                }\n            }\n            .navigationTitle(\u0022Hotels\u0022)\n            .onAppear {\n                viewModel.fetchData() // Fetch data when view appears\n            }\n            .onDisappear {\n                viewModel.cancelTasks() // Cancel tasks when view disappears\n            }\n        }\n    }\n}\n\n// MARK: - App Entry Point\n\n@main\nstruct MyApp: App {\n    var body: some Scene {\n        WindowGroup {\n            ContentView()\n        }\n    }\n}","codeHTML":"\u003cpre class=\u0022shiki nord\u0022 style=\u0022background-color: #2e3440ff\u0022 tabindex=\u00220\u0022\u003e\u003ccode\u003e\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eimport\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e SwiftUI\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eimport\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e Foundation\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #616E88\u0022\u003e// MARK: - Model Definitions\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003estruct\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e Hotel\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e:\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #8FBCBB; font-weight: bold\u0022\u003eCodable\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #8FBCBB; font-weight: bold\u0022\u003eIdentifiable \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003elet\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e id: \u003c/span\u003e\u003cspan style=\u0022color: #8FBCBB\u0022\u003eInt\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003elet\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e name: \u003c/span\u003e\u003cspan style=\u0022color: #8FBCBB\u0022\u003eString\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003elet\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e cuisine: \u003c/span\u003e\u003cspan style=\u0022color: #8FBCBB\u0022\u003eString\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003estruct\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e AdditionalInfo\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e:\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #8FBCBB; font-weight: bold\u0022\u003eCodable \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003elet\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e title: \u003c/span\u003e\u003cspan style=\u0022color: #8FBCBB\u0022\u003eString\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #616E88\u0022\u003e// MARK: - Network Service\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eclass\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #8FBCBB\u0022\u003eNetworkService\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003estatic\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003elet\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e shared \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eNetworkService\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eprivate\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003einit\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e()\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #616E88\u0022\u003e// Asynchronously fetch hotels from a JSON endpoint\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003efunc\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003efetchHotels\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e()\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003easync\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003ethrows\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e-\u0026gt;\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003elet\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e url \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eURL\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003estring\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e:\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #A3BE8C\u0022\u003ehttps://raw.githubusercontent.com/janeshsutharios/REST_GET_API/main/HotelsList.json\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e)\u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e!\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003elet\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003edata, _\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e)\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003etry\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eawait\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e URLSession.\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9\u0022\u003eshared\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003edata\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003efrom\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e:\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e url\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003edo\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e  {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003elet\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e results \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003etry\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eJSONDecoder\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e()\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003edecode\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003efrom\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e:\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e data\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e results\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003ecatch\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eprint\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #A3BE8C\u0022\u003eError in fetching hotels:\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e, error\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #616E88\u0022\u003e// Asynchronously fetch additional information from another JSON endpoint\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003efunc\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003efetchAdditionalInfo\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e()\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003easync\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003ethrows\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e-\u0026gt;\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003elet\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e url \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eURL\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003estring\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e:\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #A3BE8C\u0022\u003ehttps://raw.githubusercontent.com/janeshsutharios/REST_GET_API/main/get.json\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e)\u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e!\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003elet\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003edata, _\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e)\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003etry\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eawait\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e URLSession.\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9\u0022\u003eshared\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003edata\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003efrom\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e:\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e url\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003edo\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003etry\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eJSONDecoder\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e()\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003edecode\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003efrom\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e:\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e data\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003ecatch\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eprint\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #A3BE8C\u0022\u003eError in fetching additional info:\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e, error\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #616E88\u0022\u003e// MARK: - View Model\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e@\u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eMainActor\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eclass\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #8FBCBB\u0022\u003eHotelViewModel\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e:\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #8FBCBB; font-weight: bold\u0022\u003eObservableObject \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e@\u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003ePublished\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003evar\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e hotels: \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e@\u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003ePublished\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003evar\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e additionalInfo: \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e@\u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003ePublished\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003evar\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e isLoading: \u003c/span\u003e\u003cspan style=\u0022color: #8FBCBB\u0022\u003eBool\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003efalse\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e@\u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003ePublished\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003evar\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e errorMessage: \u003c/span\u003e\u003cspan style=\u0022color: #8FBCBB\u0022\u003eString\u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e?\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eprivate\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003evar\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e tasks: \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #616E88\u0022\u003e// Fetch data from NetworkService\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003efunc\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003efetchData\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e()\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eguard\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003e#available\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eiOS\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #B48EAD\u0022\u003e15.0\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e, \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e*\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e)\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eelse\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003ereturn\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        isLoading \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003etrue\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003ecancelTasks\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e()\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #616E88\u0022\u003e// Cancel any existing tasks\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #616E88\u0022\u003e// Task to fetch hotels\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003elet\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e fetchHotelsTask \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eTask\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003edo\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003elet\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e hotels \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003etry\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eawait\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e NetworkService.\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9\u0022\u003eshared\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003efetchHotels\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9\u0022\u003ehotels\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e hotels\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003ecatch\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e!\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003eTask.isCancelled \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                    \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9\u0022\u003eerrorMessage\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #A3BE8C\u0022\u003eFailed to fetch hotels: \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e\\(\u003c/span\u003e\u003cspan style=\u0022color: #A3BE8C\u0022\u003eerror.\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9\u0022\u003elocalizedDescription\u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e)\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #616E88\u0022\u003e// Task to fetch additional info\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003elet\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e fetchAdditionalInfoTask \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eTask\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003edo\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003elet\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e additionalInfo \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003etry\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eawait\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e NetworkService.\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9\u0022\u003eshared\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003efetchAdditionalInfo\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9\u0022\u003eadditionalInfo\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e additionalInfo\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003ecatch\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e!\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003eTask.isCancelled \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                    \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9\u0022\u003eerrorMessage\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #A3BE8C\u0022\u003eFailed to fetch additional info: \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e\\(\u003c/span\u003e\u003cspan style=\u0022color: #A3BE8C\u0022\u003eerror.\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9\u0022\u003elocalizedDescription\u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e)\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e\u0026quot;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #616E88\u0022\u003e// Store tasks for cancellation and completion handling\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        tasks \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #616E88\u0022\u003e// Wait for both tasks to complete before setting isLoading to false\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eTask\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eawait\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e fetchHotelsTask.value\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eawait\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e fetchAdditionalInfoTask.value\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eself\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9\u0022\u003eisLoading\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003efalse\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #616E88\u0022\u003e// Cancel all ongoing tasks\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003efunc\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003ecancelTasks\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e()\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        tasks.\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eforEach\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e$0\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003ecancel\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e()\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        tasks.\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eremoveAll\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #616E88\u0022\u003e// MARK: - Content View\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003estruct\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e ContentView\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e:\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #8FBCBB; font-weight: bold\u0022\u003eView \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e@\u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eStateObject\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eprivate\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003evar\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e viewModel \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eHotelViewModel\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003evar\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e body: \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003esome\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e View \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eNavigationView\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eVStack\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e                \u003c/span\u003e\u003cspan style=\u0022color: #616E88\u0022\u003e// Show loading indicator while fetching data\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e viewModel.isLoading \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                    \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eProgressView\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #A3BE8C\u0022\u003eLoading...\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                        .\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eprogressViewStyle\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eCircularProgressViewStyle\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e())\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                        .\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eonDisappear\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                            viewModel.\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003ecancelTasks\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e()\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #616E88\u0022\u003e// Cancel the tasks if the view disappears\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                        \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e                \u003c/span\u003e\u003cspan style=\u0022color: #616E88\u0022\u003e// Show error message if data fetching fails\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eelse\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eif\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003elet\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e errorMessage \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e=\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e viewModel.errorMessage \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                    \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eText\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003eerrorMessage\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                        .\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eforegroundColor\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9\u0022\u003ered\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e                \u003c/span\u003e\u003cspan style=\u0022color: #616E88\u0022\u003e// Display fetched additional info and hotels list\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003eelse\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                    \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eText\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003eviewModel.\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9\u0022\u003eadditionalInfo\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e.first\u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e?\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9\u0022\u003etitle\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003e??\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #A3BE8C\u0022\u003eNo additional info\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                        .\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003efont\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9\u0022\u003eheadline\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                        .\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003epadding\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                    \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                    \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eList\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003eviewModel.\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9\u0022\u003ehotels\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e)\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e hotel \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003ein\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                        \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eVStack\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003ealignment\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e:\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e .\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9\u0022\u003eleading\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e)\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                            \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eText\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003ehotel.\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9\u0022\u003ename\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                                .\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003efont\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9\u0022\u003eheadline\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                            \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eText\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003ehotel.\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9\u0022\u003ecuisine\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                                .\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003efont\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e.\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9\u0022\u003esubheadline\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                        \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                    \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                    .\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003elistStyle\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eInsetGroupedListStyle\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e())\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e            .\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003enavigationTitle\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e(\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #A3BE8C\u0022\u003eHotels\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e\u0026quot;\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e            .\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eonAppear\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                viewModel.\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003efetchData\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e()\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #616E88\u0022\u003e// Fetch data when view appears\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e            .\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eonDisappear\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e                viewModel.\u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003ecancelTasks\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e()\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #616E88\u0022\u003e// Cancel tasks when view disappears\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #616E88\u0022\u003e// MARK: - App Entry Point\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e@\u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003emain\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003estruct\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e MyApp\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e:\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #8FBCBB; font-weight: bold\u0022\u003eApp \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003evar\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e body: \u003c/span\u003e\u003cspan style=\u0022color: #81A1C1\u0022\u003esome\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e Scene \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eWindowGroup\u003c/span\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e            \u003c/span\u003e\u003cspan style=\u0022color: #88C0D0\u0022\u003eContentView\u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e        \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #D8DEE9FF\u0022\u003e    \u003c/span\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\u0022line\u0022\u003e\u003cspan style=\u0022color: #ECEFF4\u0022\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","language":"swift","theme":"nord","bgColor":"#2e3440ff","textColor":"#d8dee9ff","fontSize":".875rem","fontFamily":"Code-Pro-JetBrains-Mono","lineHeight":"1.25rem","clampFonts":false,"lineNumbers":false,"headerType":"none","disablePadding":false,"footerType":"none","enableMaxHeight":false,"seeMoreType":"","seeMoreString":"","seeMoreAfterLine":"","seeMoreTransition":false,"highlightingHover":false,"lineHighlightColor":"rgba(201, 218, 248, 0.2)","copyButton":true,"copyButtonType":"heroicons","useTabs":false} -->
<div class="wp-block-kevinbatdorf-code-block-pro" data-code-block-pro-font-family="Code-Pro-JetBrains-Mono" style="font-size:.875rem;font-family:Code-Pro-JetBrains-Mono,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;line-height:1.25rem;--cbp-tab-width:2;tab-size:var(--cbp-tab-width, 2)"><span role="button" tabindex="0" data-code="import SwiftUI
import Foundation

// MARK: - Model Definitions

struct Hotel: Codable, Identifiable {
    let id: Int
    let name: String
    let cuisine: String
}

struct AdditionalInfo: Codable {
    let title: String
}

// MARK: - Network Service

class NetworkService {
    static let shared = NetworkService()

    private init() {}

    // Asynchronously fetch hotels from a JSON endpoint
    func fetchHotels() async throws ->  {
        let url = URL(string: "https://raw.githubusercontent.com/janeshsutharios/REST_GET_API/main/HotelsList.json")!
        let (data, _) = try await URLSession.shared.data(from: url)
        do  {
            let results = try JSONDecoder().decode(.self, from: data)
            return results
        } catch {
            print("Error in fetching hotels:", error)
            return 
        }
    }

    // Asynchronously fetch additional information from another JSON endpoint
    func fetchAdditionalInfo() async throws ->  {
        let url = URL(string: "https://raw.githubusercontent.com/janeshsutharios/REST_GET_API/main/get.json")!
        let (data, _) = try await URLSession.shared.data(from: url)
        do {
            return try JSONDecoder().decode(.self, from: data)
        } catch {
            print("Error in fetching additional info:", error)
            return 
        }
    }
}

// MARK: - View Model

@MainActor
class HotelViewModel: ObservableObject {
    @Published var hotels:  = 
    @Published var additionalInfo:  = 
    @Published var isLoading: Bool = false
    @Published var errorMessage: String?

    private var tasks:  = 

    // Fetch data from NetworkService
    func fetchData() {
        guard #available(iOS 15.0, *) else { return }

        isLoading = true
        cancelTasks() // Cancel any existing tasks

        // Task to fetch hotels
        let fetchHotelsTask = Task {
            do {
                let hotels = try await NetworkService.shared.fetchHotels()
                self.hotels = hotels
            } catch {
                if !Task.isCancelled {
                    self.errorMessage = "Failed to fetch hotels: \(error.localizedDescription)"
                }
            }
        }

        // Task to fetch additional info
        let fetchAdditionalInfoTask = Task {
            do {
                let additionalInfo = try await NetworkService.shared.fetchAdditionalInfo()
                self.additionalInfo = additionalInfo
            } catch {
                if !Task.isCancelled {
                    self.errorMessage = "Failed to fetch additional info: \(error.localizedDescription)"
                }
            }
        }

        // Store tasks for cancellation and completion handling
        tasks = 

        // Wait for both tasks to complete before setting isLoading to false
        Task {
            await fetchHotelsTask.value
            await fetchAdditionalInfoTask.value
            self.isLoading = false
        }
    }

    // Cancel all ongoing tasks
    func cancelTasks() {
        tasks.forEach { $0.cancel() }
        tasks.removeAll()
    }
}

// MARK: - Content View

struct ContentView: View {
    @StateObject private var viewModel = HotelViewModel()

    var body: some View {
        NavigationView {
            VStack {
                // Show loading indicator while fetching data
                if viewModel.isLoading {
                    ProgressView("Loading...")
                        .progressViewStyle(CircularProgressViewStyle())
                        .onDisappear {
                            viewModel.cancelTasks() // Cancel the tasks if the view disappears
                        }
                }
                // Show error message if data fetching fails
                else if let errorMessage = viewModel.errorMessage {
                    Text(errorMessage)
                        .foregroundColor(.red)
                }
                // Display fetched additional info and hotels list
                else {
                    Text(viewModel.additionalInfo.first?.title ?? "No additional info")
                        .font(.headline)
                        .padding()
                    
                    List(viewModel.hotels) { hotel in
                        VStack(alignment: .leading) {
                            Text(hotel.name)
                                .font(.headline)
                            Text(hotel.cuisine)
                                .font(.subheadline)
                        }
                    }
                    .listStyle(InsetGroupedListStyle())
                }
            }
            .navigationTitle("Hotels")
            .onAppear {
                viewModel.fetchData() // Fetch data when view appears
            }
            .onDisappear {
                viewModel.cancelTasks() // Cancel tasks when view disappears
            }
        }
    }
}

// MARK: - App Entry Point

@main
struct MyApp: App {
    var body: some Scene {
        WindowGroup {
            ContentView()
        }
    }
}" style="color:#d8dee9ff;display:none" aria-label="Copy" class="code-block-pro-copy-button"><svg xmlns="http://www.w3.org/2000/svg" style="width:24px;height:24px" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path class="with-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path><path class="without-check" stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></span><pre class="shiki nord" style="background-color: #2e3440ff" tabindex="0"><code><span class="line"><span style="color: #81A1C1">import</span><span style="color: #D8DEE9FF"> SwiftUI</span></span>
<span class="line"><span style="color: #81A1C1">import</span><span style="color: #D8DEE9FF"> Foundation</span></span>
<span class="line"></span>
<span class="line"><span style="color: #616E88">// MARK: - Model Definitions</span></span>
<span class="line"></span>
<span class="line"><span style="color: #81A1C1">struct</span><span style="color: #D8DEE9FF"> Hotel</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB; font-weight: bold">Codable</span><span style="color: #D8DEE9FF">, </span><span style="color: #8FBCBB; font-weight: bold">Identifiable </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> id: </span><span style="color: #8FBCBB">Int</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> name: </span><span style="color: #8FBCBB">String</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> cuisine: </span><span style="color: #8FBCBB">String</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #81A1C1">struct</span><span style="color: #D8DEE9FF"> AdditionalInfo</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB; font-weight: bold">Codable </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> title: </span><span style="color: #8FBCBB">String</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #616E88">// MARK: - Network Service</span></span>
<span class="line"></span>
<span class="line"><span style="color: #81A1C1">class</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB">NetworkService</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">static</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> shared </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">NetworkService</span><span style="color: #ECEFF4">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">private</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">init</span><span style="color: #ECEFF4">()</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ECEFF4">    </span><span style="color: #616E88">// Asynchronously fetch hotels from a JSON endpoint</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">func</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">fetchHotels</span><span style="color: #ECEFF4">()</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">async</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">throws</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">-></span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4"></span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> url </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">URL</span><span style="color: #ECEFF4">(</span><span style="color: #88C0D0">string</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">https://raw.githubusercontent.com/janeshsutharios/REST_GET_API/main/HotelsList.json</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">)</span><span style="color: #81A1C1">!</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">data, _</span><span style="color: #ECEFF4">)</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">try</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">await</span><span style="color: #D8DEE9FF"> URLSession.</span><span style="color: #D8DEE9">shared</span><span style="color: #D8DEE9FF">.</span><span style="color: #88C0D0">data</span><span style="color: #ECEFF4">(</span><span style="color: #88C0D0">from</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> url</span><span style="color: #ECEFF4">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">do</span><span style="color: #ECEFF4">  {</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> results </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">try</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">JSONDecoder</span><span style="color: #ECEFF4">()</span><span style="color: #D8DEE9FF">.</span><span style="color: #88C0D0">decode</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">.</span><span style="color: #81A1C1">self</span><span style="color: #D8DEE9FF">, </span><span style="color: #88C0D0">from</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> data</span><span style="color: #ECEFF4">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #81A1C1">return</span><span style="color: #D8DEE9FF"> results</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #ECEFF4">}</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">catch</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #88C0D0">print</span><span style="color: #ECEFF4">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">Error in fetching hotels:</span><span style="color: #ECEFF4">"</span><span style="color: #D8DEE9FF">, error</span><span style="color: #ECEFF4">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #81A1C1">return</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4"></span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ECEFF4">    </span><span style="color: #616E88">// Asynchronously fetch additional information from another JSON endpoint</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">func</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">fetchAdditionalInfo</span><span style="color: #ECEFF4">()</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">async</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">throws</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">-></span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4"></span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> url </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">URL</span><span style="color: #ECEFF4">(</span><span style="color: #88C0D0">string</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">https://raw.githubusercontent.com/janeshsutharios/REST_GET_API/main/get.json</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">)</span><span style="color: #81A1C1">!</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">data, _</span><span style="color: #ECEFF4">)</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">try</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">await</span><span style="color: #D8DEE9FF"> URLSession.</span><span style="color: #D8DEE9">shared</span><span style="color: #D8DEE9FF">.</span><span style="color: #88C0D0">data</span><span style="color: #ECEFF4">(</span><span style="color: #88C0D0">from</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> url</span><span style="color: #ECEFF4">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">do</span><span style="color: #ECEFF4"> {</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #81A1C1">return</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">try</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">JSONDecoder</span><span style="color: #ECEFF4">()</span><span style="color: #D8DEE9FF">.</span><span style="color: #88C0D0">decode</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">.</span><span style="color: #81A1C1">self</span><span style="color: #D8DEE9FF">, </span><span style="color: #88C0D0">from</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> data</span><span style="color: #ECEFF4">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #ECEFF4">}</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">catch</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #88C0D0">print</span><span style="color: #ECEFF4">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">Error in fetching additional info:</span><span style="color: #ECEFF4">"</span><span style="color: #D8DEE9FF">, error</span><span style="color: #ECEFF4">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #81A1C1">return</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4"></span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #616E88">// MARK: - View Model</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ECEFF4">@</span><span style="color: #81A1C1">MainActor</span></span>
<span class="line"><span style="color: #81A1C1">class</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB">HotelViewModel</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB; font-weight: bold">ObservableObject </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">@</span><span style="color: #81A1C1">Published</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">var</span><span style="color: #D8DEE9FF"> hotels: </span><span style="color: #ECEFF4"></span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">@</span><span style="color: #81A1C1">Published</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">var</span><span style="color: #D8DEE9FF"> additionalInfo: </span><span style="color: #ECEFF4"></span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">@</span><span style="color: #81A1C1">Published</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">var</span><span style="color: #D8DEE9FF"> isLoading: </span><span style="color: #8FBCBB">Bool</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">false</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">@</span><span style="color: #81A1C1">Published</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">var</span><span style="color: #D8DEE9FF"> errorMessage: </span><span style="color: #8FBCBB">String</span><span style="color: #81A1C1">?</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">private</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">var</span><span style="color: #D8DEE9FF"> tasks: </span><span style="color: #ECEFF4"></span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span></span>
<span class="line"></span>
<span class="line"><span style="color: #ECEFF4">    </span><span style="color: #616E88">// Fetch data from NetworkService</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">func</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">fetchData</span><span style="color: #ECEFF4">()</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">guard</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">#available</span><span style="color: #ECEFF4">(</span><span style="color: #81A1C1">iOS</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">15.0</span><span style="color: #D8DEE9FF">, </span><span style="color: #81A1C1">*</span><span style="color: #ECEFF4">)</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">else</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">return</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">        isLoading </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">true</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #88C0D0">cancelTasks</span><span style="color: #ECEFF4">()</span><span style="color: #D8DEE9FF"> </span><span style="color: #616E88">// Cancel any existing tasks</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ECEFF4">        </span><span style="color: #616E88">// Task to fetch hotels</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> fetchHotelsTask </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">Task</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #81A1C1">do</span><span style="color: #ECEFF4"> {</span></span>
<span class="line"><span style="color: #D8DEE9FF">                </span><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> hotels </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">try</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">await</span><span style="color: #D8DEE9FF"> NetworkService.</span><span style="color: #D8DEE9">shared</span><span style="color: #D8DEE9FF">.</span><span style="color: #88C0D0">fetchHotels</span><span style="color: #ECEFF4">()</span></span>
<span class="line"><span style="color: #D8DEE9FF">                </span><span style="color: #81A1C1">self</span><span style="color: #D8DEE9FF">.</span><span style="color: #D8DEE9">hotels</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> hotels</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #ECEFF4">}</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">catch</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">                </span><span style="color: #81A1C1">if</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">!</span><span style="color: #D8DEE9FF">Task.isCancelled </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">                    </span><span style="color: #81A1C1">self</span><span style="color: #D8DEE9FF">.</span><span style="color: #D8DEE9">errorMessage</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">Failed to fetch hotels: </span><span style="color: #81A1C1">\(</span><span style="color: #A3BE8C">error.</span><span style="color: #D8DEE9">localizedDescription</span><span style="color: #81A1C1">)</span><span style="color: #ECEFF4">"</span></span>
<span class="line"><span style="color: #D8DEE9FF">                </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ECEFF4">        </span><span style="color: #616E88">// Task to fetch additional info</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> fetchAdditionalInfoTask </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">Task</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #81A1C1">do</span><span style="color: #ECEFF4"> {</span></span>
<span class="line"><span style="color: #D8DEE9FF">                </span><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> additionalInfo </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">try</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">await</span><span style="color: #D8DEE9FF"> NetworkService.</span><span style="color: #D8DEE9">shared</span><span style="color: #D8DEE9FF">.</span><span style="color: #88C0D0">fetchAdditionalInfo</span><span style="color: #ECEFF4">()</span></span>
<span class="line"><span style="color: #D8DEE9FF">                </span><span style="color: #81A1C1">self</span><span style="color: #D8DEE9FF">.</span><span style="color: #D8DEE9">additionalInfo</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> additionalInfo</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #ECEFF4">}</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">catch</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">                </span><span style="color: #81A1C1">if</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">!</span><span style="color: #D8DEE9FF">Task.isCancelled </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">                    </span><span style="color: #81A1C1">self</span><span style="color: #D8DEE9FF">.</span><span style="color: #D8DEE9">errorMessage</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">Failed to fetch additional info: </span><span style="color: #81A1C1">\(</span><span style="color: #A3BE8C">error.</span><span style="color: #D8DEE9">localizedDescription</span><span style="color: #81A1C1">)</span><span style="color: #ECEFF4">"</span></span>
<span class="line"><span style="color: #D8DEE9FF">                </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ECEFF4">        </span><span style="color: #616E88">// Store tasks for cancellation and completion handling</span></span>
<span class="line"><span style="color: #D8DEE9FF">        tasks </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span></span>
<span class="line"></span>
<span class="line"><span style="color: #ECEFF4">        </span><span style="color: #616E88">// Wait for both tasks to complete before setting isLoading to false</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #88C0D0">Task</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #81A1C1">await</span><span style="color: #D8DEE9FF"> fetchHotelsTask.value</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #81A1C1">await</span><span style="color: #D8DEE9FF"> fetchAdditionalInfoTask.value</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #81A1C1">self</span><span style="color: #D8DEE9FF">.</span><span style="color: #D8DEE9">isLoading</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">false</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ECEFF4">    </span><span style="color: #616E88">// Cancel all ongoing tasks</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">func</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">cancelTasks</span><span style="color: #ECEFF4">()</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">        tasks.</span><span style="color: #88C0D0">forEach</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">$0</span><span style="color: #D8DEE9FF">.</span><span style="color: #88C0D0">cancel</span><span style="color: #ECEFF4">()</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #D8DEE9FF">        tasks.</span><span style="color: #88C0D0">removeAll</span><span style="color: #ECEFF4">()</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #616E88">// MARK: - Content View</span></span>
<span class="line"></span>
<span class="line"><span style="color: #81A1C1">struct</span><span style="color: #D8DEE9FF"> ContentView</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB; font-weight: bold">View </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">@</span><span style="color: #81A1C1">StateObject</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">private</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">var</span><span style="color: #D8DEE9FF"> viewModel </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">HotelViewModel</span><span style="color: #ECEFF4">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">var</span><span style="color: #D8DEE9FF"> body: </span><span style="color: #81A1C1">some</span><span style="color: #D8DEE9FF"> View </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #88C0D0">NavigationView</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #88C0D0">VStack</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #ECEFF4">                </span><span style="color: #616E88">// Show loading indicator while fetching data</span></span>
<span class="line"><span style="color: #D8DEE9FF">                </span><span style="color: #81A1C1">if</span><span style="color: #D8DEE9FF"> viewModel.isLoading </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">                    </span><span style="color: #88C0D0">ProgressView</span><span style="color: #ECEFF4">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">Loading...</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">                        .</span><span style="color: #88C0D0">progressViewStyle</span><span style="color: #ECEFF4">(</span><span style="color: #88C0D0">CircularProgressViewStyle</span><span style="color: #ECEFF4">())</span></span>
<span class="line"><span style="color: #D8DEE9FF">                        .</span><span style="color: #88C0D0">onDisappear</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">                            viewModel.</span><span style="color: #88C0D0">cancelTasks</span><span style="color: #ECEFF4">()</span><span style="color: #D8DEE9FF"> </span><span style="color: #616E88">// Cancel the tasks if the view disappears</span></span>
<span class="line"><span style="color: #D8DEE9FF">                        </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #D8DEE9FF">                </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #ECEFF4">                </span><span style="color: #616E88">// Show error message if data fetching fails</span></span>
<span class="line"><span style="color: #D8DEE9FF">                </span><span style="color: #81A1C1">else</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">if</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">let</span><span style="color: #D8DEE9FF"> errorMessage </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> viewModel.errorMessage </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">                    </span><span style="color: #88C0D0">Text</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">errorMessage</span><span style="color: #ECEFF4">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">                        .</span><span style="color: #88C0D0">foregroundColor</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">.</span><span style="color: #D8DEE9">red</span><span style="color: #ECEFF4">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">                </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #ECEFF4">                </span><span style="color: #616E88">// Display fetched additional info and hotels list</span></span>
<span class="line"><span style="color: #D8DEE9FF">                </span><span style="color: #81A1C1">else</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">                    </span><span style="color: #88C0D0">Text</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">viewModel.</span><span style="color: #D8DEE9">additionalInfo</span><span style="color: #D8DEE9FF">.first</span><span style="color: #81A1C1">?</span><span style="color: #D8DEE9FF">.</span><span style="color: #D8DEE9">title</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">??</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">No additional info</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">                        .</span><span style="color: #88C0D0">font</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">.</span><span style="color: #D8DEE9">headline</span><span style="color: #ECEFF4">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">                        .</span><span style="color: #88C0D0">padding</span><span style="color: #ECEFF4">()</span></span>
<span class="line"><span style="color: #D8DEE9FF">                    </span></span>
<span class="line"><span style="color: #D8DEE9FF">                    </span><span style="color: #88C0D0">List</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">viewModel.</span><span style="color: #D8DEE9">hotels</span><span style="color: #ECEFF4">)</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span><span style="color: #D8DEE9FF"> hotel </span><span style="color: #81A1C1">in</span></span>
<span class="line"><span style="color: #D8DEE9FF">                        </span><span style="color: #88C0D0">VStack</span><span style="color: #ECEFF4">(</span><span style="color: #88C0D0">alignment</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> .</span><span style="color: #D8DEE9">leading</span><span style="color: #ECEFF4">)</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">                            </span><span style="color: #88C0D0">Text</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">hotel.</span><span style="color: #D8DEE9">name</span><span style="color: #ECEFF4">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">                                .</span><span style="color: #88C0D0">font</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">.</span><span style="color: #D8DEE9">headline</span><span style="color: #ECEFF4">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">                            </span><span style="color: #88C0D0">Text</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">hotel.</span><span style="color: #D8DEE9">cuisine</span><span style="color: #ECEFF4">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">                                .</span><span style="color: #88C0D0">font</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">.</span><span style="color: #D8DEE9">subheadline</span><span style="color: #ECEFF4">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">                        </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #D8DEE9FF">                    </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #D8DEE9FF">                    .</span><span style="color: #88C0D0">listStyle</span><span style="color: #ECEFF4">(</span><span style="color: #88C0D0">InsetGroupedListStyle</span><span style="color: #ECEFF4">())</span></span>
<span class="line"><span style="color: #D8DEE9FF">                </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #D8DEE9FF">            .</span><span style="color: #88C0D0">navigationTitle</span><span style="color: #ECEFF4">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">Hotels</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">            .</span><span style="color: #88C0D0">onAppear</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">                viewModel.</span><span style="color: #88C0D0">fetchData</span><span style="color: #ECEFF4">()</span><span style="color: #D8DEE9FF"> </span><span style="color: #616E88">// Fetch data when view appears</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #D8DEE9FF">            .</span><span style="color: #88C0D0">onDisappear</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">                viewModel.</span><span style="color: #88C0D0">cancelTasks</span><span style="color: #ECEFF4">()</span><span style="color: #D8DEE9FF"> </span><span style="color: #616E88">// Cancel tasks when view disappears</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #616E88">// MARK: - App Entry Point</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ECEFF4">@</span><span style="color: #81A1C1">main</span></span>
<span class="line"><span style="color: #81A1C1">struct</span><span style="color: #D8DEE9FF"> MyApp</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB; font-weight: bold">App </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">var</span><span style="color: #D8DEE9FF"> body: </span><span style="color: #81A1C1">some</span><span style="color: #D8DEE9FF"> Scene </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #88C0D0">WindowGroup</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #88C0D0">ContentView</span><span style="color: #ECEFF4">()</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span></code></pre></div>
<!-- /wp:kevinbatdorf/code-block-pro -->